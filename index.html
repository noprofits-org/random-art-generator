<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Random Met Artwork</title>
  <link rel="icon" href="./icons/icon-192x192.png">
  <style>
    :root { --primary:#0062cc; --muted:#666; --radius:8px; }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;width:100%;height:100%;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;color:#222;-webkit-font-smoothing:antialiased;overscroll-behavior:none}

    /* Mobile-first: Full-screen app layout */
    .app-container{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;background:#000}

    /* Minimal overlay header */
    .overlay-header{position:absolute;top:0;left:0;right:0;z-index:100;display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:linear-gradient(to bottom,rgba(0,0,0,0.6),transparent);pointer-events:none}
    .overlay-header h1{font-size:1rem;margin:0;color:#fff;font-weight:600;text-shadow:0 1px 3px rgba(0,0,0,0.5);pointer-events:auto}
    .refresh-btn{pointer-events:auto;background:rgba(255,255,255,0.2);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);color:#fff;border:1px solid rgba(255,255,255,0.3);border-radius:50%;padding:10px;width:42px;height:42px;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;justify-content:center;transition:background 0.2s}
    .refresh-btn:active{background:rgba(255,255,255,0.4);transform:rotate(180deg);transition:transform 0.4s}

    /* Full-screen image container */
    .image-viewport{flex:1;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;background:#000}
    .image-viewport img{width:100%;height:100%;object-fit:contain;user-select:none;-webkit-user-select:none}

    /* Bottom drawer */
    .drawer{position:fixed;bottom:0;left:0;right:0;background:#fff;border-radius:16px 16px 0 0;box-shadow:0 -2px 20px rgba(0,0,0,0.3);transform:translateY(calc(100% - 60px));transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);z-index:200;max-height:85vh;display:flex;flex-direction:column}
    .drawer.open{transform:translateY(0)}

    .drawer-handle{display:flex;justify-content:center;align-items:center;padding:12px;cursor:pointer;user-select:none}
    .drawer-handle-bar{width:40px;height:4px;background:#ddd;border-radius:2px}

    .drawer-content{flex:1;overflow-y:auto;padding:0 16px 20px 16px;-webkit-overflow-scrolling:touch}

    .status{margin:8px 0;color:var(--muted);font-size:0.9rem;text-align:center}
    .status.error{color:#c0392b}
    .status.loading{color:#555}

    .controls{display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap}
    select{padding:10px 12px;border-radius:var(--radius);border:1px solid #ddd;font-size:0.95rem;background:#fff;flex:1;min-height:44px;-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 8px center;background-size:20px;padding-right:32px}

    .nav-group{display:flex;gap:8px;width:100%}
    button{background:var(--primary);color:#fff;border:0;border-radius:var(--radius);padding:12px 16px;font-weight:600;cursor:pointer;font-size:0.95rem;min-height:44px;white-space:nowrap;transition:background 0.2s,transform 0.1s;flex:1}
    button:active{transform:scale(0.98)}
    button[disabled]{opacity:.6;cursor:not-allowed;transform:none}

    .btn-outline{background:#fff!important;color:var(--primary)!important;border:2px solid var(--primary)!important}
    .btn-icon{background:#fff!important;color:#e74c3c!important;border:2px solid #e74c3c!important;padding:10px 14px!important;font-size:1.2rem;line-height:1}
    .btn-icon.favorited{background:#e74c3c!important;color:#fff!important}
    .btn-icon .heart{display:inline-block;transition:transform 0.2s}
    .btn-icon:active .heart{transform:scale(1.3)}

    .info{margin:16px 0}
    .title{margin:0 0 8px 0;font-size:1.2rem;line-height:1.3;font-weight:600}
    .meta{color:var(--muted);margin:4px 0;font-size:0.9rem;line-height:1.4}
    .link{display:inline-block;margin-top:8px;color:var(--primary);text-decoration:none;font-weight:500;font-size:0.95rem}
    .link:hover{text-decoration:underline}

    .action-bar{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .action-bar button{flex:1;min-width:120px}

    .tags{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:12px}
    .tag{font-size:0.85rem;padding:4px 10px;border-radius:6px;font-weight:500;white-space:nowrap}
    .tag-dept{background:#eef5ff;color:#0062cc}
    .tag-pd{background:#d4edda;color:#155724;border:1px solid #c3e6cb}

    .gesture-hint{margin-top:16px;font-size:0.75rem;color:#888;text-align:center;line-height:1.5;padding:8px;background:#f9f9f9;border-radius:6px}

    footer{margin-top:16px;text-align:center;color:#999;font-size:0.75rem;line-height:1.4;padding:8px 0}

    /* Tablet/Desktop: Traditional layout */
    @media (min-width: 768px) {
      body{overflow:auto}
      .app-container{position:relative;max-width:900px;margin:0 auto;height:auto;background:#f7f7f7}
      .overlay-header{position:relative;background:none;padding:20px;justify-content:space-between}
      .overlay-header h1{color:var(--primary);font-size:1.5rem;text-shadow:none}
      .refresh-btn{background:var(--primary);border:0;color:#fff}
      .image-viewport{height:auto;min-height:400px;background:#fafafa;border:1px solid #eee;border-radius:var(--radius);margin:0 20px}
      .image-viewport img{max-height:70vh;width:auto;height:auto}
      .drawer{position:relative;transform:none!important;border-radius:12px;margin:20px;box-shadow:0 2px 10px rgba(0,0,0,0.06);max-height:none}
      .drawer-handle{display:none}
      .drawer-content{padding:16px}
      .action-bar button{flex:0 1 auto}
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Overlay header with refresh -->
    <div class="overlay-header">
      <h1>Random Met Artwork</h1>
      <button id="refreshBtn" class="refresh-btn" aria-label="Load random artwork" title="Refresh">üé≤</button>
    </div>

    <!-- Full-screen image -->
    <div class="image-viewport">
      <img id="artImg" alt="Artwork" />
    </div>

    <!-- Bottom drawer -->
    <div id="drawer" class="drawer">
      <div class="drawer-handle" id="drawerHandle">
        <div class="drawer-handle-bar"></div>
      </div>

      <div class="drawer-content">
        <div id="status" class="status">Ready</div>

        <div class="controls">
          <select id="deptSelect" title="Filter by department">
            <option value="">All Departments</option>
          </select>
        </div>

        <div class="nav-group">
          <button id="prevBtn" title="Previous (‚Üê)" aria-label="Previous artwork">‚Üê Prev</button>
          <button id="randomBtn" title="Random (R)" aria-label="Load random artwork">üé≤ New</button>
          <button id="nextBtn" title="Next (‚Üí)" aria-label="Next artwork">Next ‚Üí</button>
        </div>

        <div class="tags">
          <span id="deptTag" class="tag tag-dept" style="display:none"></span>
          <span id="pdTag" class="tag tag-pd" style="display:none">Public Domain</span>
        </div>

        <div class="info" id="info"></div>

        <div class="action-bar">
          <button id="favoriteBtn" class="btn-icon" aria-label="Add to favorites (F)" title="Add to favorites">
            <span class="heart">‚ô°</span>
          </button>
          <button id="shareBtn" class="btn-outline" aria-label="Share this artwork">Share</button>
          <button id="copyBtn" class="btn-outline" aria-label="Copy link to clipboard">Copy Link</button>
        </div>

        <div class="gesture-hint">
          üí° Tap image for random ‚Ä¢ Swipe ‚Üê ‚Üí to navigate ‚Ä¢ Swipe drawer handle to open/close
        </div>

        <footer>
          Images and data courtesy of The Metropolitan Museum of Art
        </footer>
      </div>
    </div>
  </div>

  <script src="./main.js"></script>
</body>
</html>
