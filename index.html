<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Random Met Artwork</title>
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./icons/icon-192x192.png">
  <link rel="apple-touch-icon" href="./icons/icon-192x192.png">
  <style>
    :root { --primary:#0062cc; --muted:#666; --radius:8px; }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;width:100%;height:100%;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;color:#222;-webkit-font-smoothing:antialiased;overscroll-behavior:none}

    /* Mobile-first: Full-screen app layout */
    .app-container{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;background:#000}

    /* Hamburger menu button */
    .menu-btn{position:fixed;top:16px;left:16px;z-index:300;background:rgba(255,255,255,0.2);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.3);border-radius:8px;padding:10px;width:44px;height:44px;cursor:pointer;display:flex;flex-direction:column;justify-content:space-around;align-items:center;transition:background 0.2s}
    .menu-btn span{display:block;width:24px;height:2px;background:#fff;border-radius:2px;transition:all 0.3s}
    .menu-btn:active{background:rgba(255,255,255,0.4)}
    .menu-btn.open span:nth-child(1){transform:translateY(7px) rotate(45deg)}
    .menu-btn.open span:nth-child(2){opacity:0}
    .menu-btn.open span:nth-child(3){transform:translateY(-7px) rotate(-45deg)}

    /* Floating action buttons */
    .floating-btn{position:fixed;bottom:20px;z-index:300;background:rgba(255,255,255,0.2);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.3);border-radius:50%;padding:12px;width:52px;height:52px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s;font-size:1.4rem;color:#fff;box-shadow:0 4px 12px rgba(0,0,0,0.3)}
    .floating-btn:active{transform:scale(0.95)}
    .favorite-btn-float{right:20px}
    .favorite-btn-float.favorited{background:rgba(231,76,60,0.9)!important;border-color:rgba(231,76,60,1)!important}
    .download-btn-float{left:20px}

    /* Full-screen image container */
    .image-viewport{flex:1;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative;background:#000}
    .image-viewport img{width:100%;height:100%;object-fit:contain;user-select:none;-webkit-user-select:none}

    /* Side drawer */
    .drawer{position:fixed;top:0;left:0;bottom:0;width:320px;max-width:85vw;background:#fff;box-shadow:2px 0 20px rgba(0,0,0,0.3);transform:translateX(-100%);transition:transform 0.3s cubic-bezier(0.4,0,0.2,1);z-index:250;display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}
    .drawer.open{transform:translateX(0)}

    /* Drawer overlay */
    .drawer-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);z-index:240;opacity:0;visibility:hidden;transition:opacity 0.3s,visibility 0.3s}
    .drawer-overlay.visible{opacity:1;visibility:visible}

    .drawer-content{flex:1;overflow-y:auto;overflow-x:hidden;padding:80px 16px 20px 16px;-webkit-overflow-scrolling:touch;max-width:100%}

    .status{margin:8px 0;color:var(--muted);font-size:0.9rem;text-align:center}
    .status.error{color:#c0392b}
    .status.loading{color:#555}

    .controls{display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap}
    select{padding:10px 12px;border-radius:var(--radius);border:1px solid #ddd;font-size:0.95rem;background:#fff;flex:1;min-height:44px;-webkit-appearance:none;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 8px center;background-size:20px;padding-right:32px}

    .nav-group{display:flex;gap:8px;width:100%}
    button{background:var(--primary);color:#fff;border:0;border-radius:var(--radius);padding:12px 16px;font-weight:600;cursor:pointer;font-size:0.95rem;min-height:44px;white-space:nowrap;transition:background 0.2s,transform 0.1s;flex:1}
    button:active{transform:scale(0.98)}
    button[disabled]{opacity:.6;cursor:not-allowed;transform:none}

    .btn-outline{background:#fff!important;color:var(--primary)!important;border:2px solid var(--primary)!important}
    .btn-icon{background:#fff!important;color:#e74c3c!important;border:2px solid #e74c3c!important;padding:10px 14px!important;font-size:1.2rem;line-height:1}
    .btn-icon.favorited{background:#e74c3c!important;color:#fff!important}
    .btn-icon .heart{display:inline-block;transition:transform 0.2s}
    .btn-icon:active .heart{transform:scale(1.3)}

    .info{margin:16px 0;word-wrap:break-word;overflow-wrap:break-word;max-width:100%}
    .title{margin:0 0 8px 0;font-size:1.2rem;line-height:1.3;font-weight:600;word-wrap:break-word}
    .meta{color:var(--muted);margin:4px 0;font-size:0.9rem;line-height:1.4;word-wrap:break-word}
    .link{display:inline-block;margin-top:8px;color:var(--primary);text-decoration:none;font-weight:500;font-size:0.95rem;word-wrap:break-word;max-width:100%}
    .link:hover{text-decoration:underline}

    .action-bar{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .action-bar button{flex:1;min-width:120px}

    .tags{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:12px}
    .tag{font-size:0.85rem;padding:4px 10px;border-radius:6px;font-weight:500;white-space:nowrap}
    .tag-dept{background:#eef5ff;color:#0062cc}
    .tag-pd{background:#d4edda;color:#155724;border:1px solid #c3e6cb}

    .gesture-hint{margin-top:16px;font-size:0.75rem;color:#888;text-align:center;line-height:1.5;padding:8px;background:#f9f9f9;border-radius:6px}

    /* Favorites list */
    .favorites-section{margin-top:24px;border-top:1px solid #eee;padding-top:16px}
    .favorites-header{font-weight:600;font-size:0.95rem;margin-bottom:12px;color:#333}
    .favorites-list{display:flex;flex-direction:column;gap:8px}
    .favorite-item{background:#f9f9f9;border-radius:8px;padding:10px 12px;cursor:pointer;transition:background 0.2s;display:flex;align-items:center;gap:10px;border:1px solid #eee}
    .favorite-item:active{background:#f0f0f0}
    .favorite-item-thumb{width:48px;height:48px;object-fit:cover;border-radius:4px;background:#e0e0e0;flex-shrink:0}
    .favorite-item-info{flex:1;min-width:0}
    .favorite-item-title{font-size:0.9rem;font-weight:500;margin:0 0 2px 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .favorite-item-artist{font-size:0.8rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .favorite-item-remove{color:#e74c3c;font-size:1rem;padding:4px;flex-shrink:0;line-height:1}
    .favorites-empty{text-align:center;color:var(--muted);font-size:0.85rem;padding:16px}

    footer{margin-top:16px;text-align:center;color:#999;font-size:0.75rem;line-height:1.4;padding:8px 0}

    /* Tablet/Desktop: Side-by-side panel layout */
    @media (min-width: 768px) {
      html,body{overflow:hidden}
      .app-container{position:fixed;top:0;left:0;right:0;bottom:0;flex-direction:row;background:#1a1a1a;max-width:none;margin:0;height:100vh}
      .menu-btn{display:none}
      .floating-btn{display:none}

      /* Left panel - controls */
      .drawer{position:relative;transform:none!important;width:340px;min-width:340px;max-width:340px;height:100vh;border-radius:0;margin:0;box-shadow:none;border-right:1px solid #333;background:#fff;z-index:1;order:-1}
      .drawer-overlay{display:none}
      .drawer-content{padding:20px;height:100%;overflow-y:auto}

      /* Right panel - image (maximized) */
      .image-viewport{flex:1;height:100vh;min-height:100vh;background:#000;border:none;border-radius:0;margin:0;order:1}
      .image-viewport img{width:100%;height:100%;max-height:100vh;object-fit:contain}

      .action-bar button{flex:0 1 auto}
      .gesture-hint{display:none}
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Hamburger menu button -->
    <button id="menuBtn" class="menu-btn" aria-label="Open menu" title="Menu">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Full-screen image -->
    <div class="image-viewport">
      <img id="artImg" alt="Artwork" />
    </div>

    <!-- Floating action buttons -->
    <button id="floatingFavoriteBtn" class="floating-btn favorite-btn-float" aria-label="Toggle favorite" title="Favorite">
      <span class="heart-float">‚ô°</span>
    </button>
    <button id="floatingDownloadBtn" class="floating-btn download-btn-float" aria-label="Download image" title="Download">
      ‚¨á
    </button>

    <!-- Drawer overlay -->
    <div id="drawerOverlay" class="drawer-overlay"></div>

    <!-- Side drawer -->
    <div id="drawer" class="drawer">

      <div class="drawer-content">
        <div id="status" class="status">Ready</div>

        <div class="controls">
          <select id="deptSelect" title="Filter by department">
            <option value="">All Departments</option>
          </select>
        </div>

        <div class="nav-group">
          <button id="prevBtn" title="Previous (‚Üê)" aria-label="Previous artwork">‚Üê Prev</button>
          <button id="randomBtn" title="Random (R)" aria-label="Load random artwork">üé≤ New</button>
          <button id="nextBtn" title="Next (‚Üí)" aria-label="Next artwork">Next ‚Üí</button>
        </div>

        <div class="tags">
          <span id="deptTag" class="tag tag-dept" style="display:none"></span>
          <span id="pdTag" class="tag tag-pd" style="display:none">Public Domain</span>
        </div>

        <div class="info" id="info"></div>

        <div class="action-bar">
          <button id="favoriteBtn" class="btn-icon" aria-label="Add to favorites (F)" title="Add to favorites">
            <span class="heart">‚ô°</span>
          </button>
          <button id="shareBtn" class="btn-outline" aria-label="Share this artwork">Share</button>
          <button id="copyBtn" class="btn-outline" aria-label="Copy link to clipboard">Copy Link</button>
        </div>

        <div class="favorites-section" id="favoritesSection">
          <div class="favorites-header">My Favorites (<span id="favoritesCount">0</span>)</div>
          <div class="favorites-list" id="favoritesList">
            <div class="favorites-empty">No favorites yet. Tap the heart to add!</div>
          </div>
        </div>

        <div class="gesture-hint">
          üí° Tap image for random ‚Ä¢ Swipe ‚Üê ‚Üí to navigate
        </div>

        <footer>
          Images and data courtesy of The Metropolitan Museum of Art
        </footer>
      </div>
    </div>
  </div>

  <script src="./main.js"></script>
</body>
</html>
